<div id="root"></div>
<template>
  <section>
    <h1 class="hidden offset">Waves</h1>
    <hr class="compressed">
    <h2 class="hidden offset">Types of Waves</h2>
    <p class="hidden offset">Waves transfer energy without transferring matter.</p>
    <p class="hidden offset">Waves <strong>oscillate</strong> or <strong>vibrate</strong> about a fixed point.</p>
    <ul class="hidden offset">
      <li>Ripples cause particles of water to oscillate up and down</li>
      <li>Sound waves cause particles of air to vibrate back and forth</li>
    </ul>
    <p class="hidden offset">There are 2 types of waves.</p>
    <ul class="hidden offset">
      <li>
        <strong>Transverse</strong>: energy transfer is perpendicular to the direction of wave travel 
      </li>
      <li>
        <strong>Longitudinal</strong>: energy transfer is parallel to the direction of wave travel
      </li>
    </ul>
    <p class="hidden offset">All waves have 4 basic properties.</p>
    <ul class="hidden offset">
      <li>
        <strong>Frequency</strong>: the number of cycles per second measured in <strong>hertz</strong> \( f=\frac{1}{T} \) or \( f=\frac{v}{\lambda} \)
      </li>
      <li>
        <strong>Wavelength</strong>: the length of a complete wave measured in <strong>metres</strong> \( \lambda=\frac{v}{f} \)
      </li>
      <li>
        <strong>Velocity</strong>: the speed of the wave measured in <strong>metres per second</strong> \( v=f \times \lambda \)
      </li>
      <li>
        <strong>Amplitude</strong>: the maximum displacement from the equilibrium position measured in <strong>metres</strong>
      </li>
    </ul>
    <h3 class="hidden offset">Transverse Waves</h3>
    <p class="hidden offset">Light is an example of a transverse wave. These waves have 3 characteristics.</p>
    <ul class="hidden offset">
      <li>Can travel in a vacuum</li>
      <li>Travel slower in denser mediums</li>
      <li>Produce crests (peaks) and troughs (dips)</li>
    </ul>
    <p class="hidden offset">Waves in the <strong>electromagnetic spectrum</strong> are all transverse waves. These waves travel at the speed of light but have different frequencies and wavelengths.</p>
    <ol class="hidden offset">
      <li>Radio Waves (Lowest, Longest)</li>
      <li>Micro Waves</li>
      <li>Infrared Rays</li>
      <li>Visible Light</li>
      <li>Ultraviolet Rays</li>
      <li>X Rays</li>
      <li>Gamma Rays (Highest, Shortest)</li>
    </ol>
    <h3 class="hidden offset">Longitudinal Waves</h3>
    <p class="hidden offset">Sound is an example of a longitudinal wave. These waves have 3 characteristics.</p>
    <ul class="hidden offset">
      <li>Never travel in a vacuum</li>
      <li>Travel faster in denser mediums</li>
      <li>Produce compressions and rarefactions</li>
    </ul>
    <h2 class="hidden offset">Light</h2>
    <p class="hidden offset">Light is a transverse wave. There are 3 main concepts concerning light.</p>
    <ul class="hidden offset">
      <li>Reflection</li>
      <li>Refraction</li>
      <li>Total Internal Reflection</li>
    </ul>
    <h3 class="hidden offset">Reflection</h3>
    <p class="hidden offset">Reflection occurs when light rays bounce off an opaque object. Light rays can be absorbed, reflected, or refracted.</p>
    <p class="hidden offset">There are 2 names for light rays during reflection.</p>
    <ul class="hidden offset">
      <li>
        <strong>Incident Ray</strong>: the incoming ray that hits the surface
      </li>
      <li>
        <strong>Reflected Ray</strong>: the ray that bounces off the surface
      </li>
    </ul>
    <p class="hidden offset">The <strong>normal</strong> is an imaginary line that is perpendicular to the surface of the object. The <strong>angle of incidence</strong> is equal to the <strong>angle of reflection</strong>.</p>
    <ul class="hidden offset">
      <li>
        <strong>Angle of Incidence</strong>: the angle formed between the incident ray and the normal
      </li>
      <li>
        <strong>Angle of Reflection</strong>: the angle formed between the reflected ray and the normal
      </li>
    </ul>
    <h3 class="hidden offset">Refraction</h3>
    <p class="hidden offset">Refraction occurs when light passes the boundary between 2 transparent media. Refraction may result in a change of direction if the incident ray is <strong>not</strong> perpendicular to the boundary.</p>
    <ul class="hidden offset">
      <li class="hidden offset">
        While moving from a rarer medium to a denser medium...
        <ul>
          <li>Light ray slows down</li>
          <li>Light bends towards the normal</li>
        </ul>
      </li>
      <li class="hidden offset">
        While moving from a denser medium to a rarer medium...
        <ul>
          <li>Light ray speeds up</li>
          <li>Light bends away from the normal</li>
        </ul>
      </li>
    </ul>
    <h3 class="hidden offset">Lenses and Mirrors</h3>
    <p class="hidden offset">Lenses and mirrors produce images from objects. These images can be categorised in 3 ways.</p>
    <ul class="hidden offset">
      <li>
        <strong>Real</strong> or <strong>Virtual</strong>
      </li>
      <li>
        <strong>Upright</strong> or <strong>Inverted</strong>
      </li>
      <li>
        <strong>Enlarged</strong> or <strong>Diminished</strong> or <strong>Equal</strong>
      </li>
    </ul>
    <p class="hidden offset">Real images converge while virtual images diverge but appear to converge behind the lens or mirror.</p>
    <mdc-table headers="['Property', 'Real', 'Virtual']" table="[['Rays Meet', 'icon:check', 'icon:close'], ['Projectable', 'icon:check', 'icon:close'], ['Orientation', 'Inverted', 'Upright']]"></mdc-table>
    <ul class="hidden offset">
      <li>
        Convex lenses <strong>converge</strong> rays while concave lenses <strong>diverge</strong> rays.
      </li>
      <li>
        Convex mirrors <strong>diverge</strong> rays while concave lenses <strong>converge</strong> rays.
      </li>
    </ul>
    <p class="hidden offset">The table shows the image cases for converging lenses and mirrors.</p>
    <mdc-table headers="['Position', 'Type', 'Orientaton', 'Scale']" table="[['\\(d_o > 2f\\)', 'Real', 'Inverted', 'Diminished'], ['\\(d_o = 2f\\)', 'Real', 'Inverted', 'Equal'], ['\\(2f > d_o > f\\)', 'Real', 'Inverted', 'Enlarged'], ['\\(d_o = f\\)', '?', '?', '?'], ['\\(f > d_o > 0\\)', 'Virtual', 'Upright', 'Enlarged']]"></mdc-table>
    <p class="hidden offset">The height and distance of the image can be determined using formulas. The formulas can be derived by solving a system of linear equations.</p>
    <ul class="hidden offset">
      <li>A negative height means the image is inverted</li>
      <li>A negative distance means the image is virtual</li>
    </ul>
    <p class="hidden katex-display">
      \(
        h_i=\frac{f \times h_o}{f-d_o} \\
        d_i=-\frac{d_o \times f}{f - d_o}
      \)
    </p>
    <p class="hidden offset">Straight rays always bend towards the focal point.</p>
    <div class="diagram hidden">
      <img src="%{ path }%images/convex lens.png" alt="convex lens ray diagram">
    </div>
    <div class="interactive">
      <div class="svg-group" style="height: 256px;">
        <div class="svg">
          <svg width="32" height="125" viewBox="0 0 32 125" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 124.032C5.80541 105.66 0 84.5159 0 62.0158C0 39.5158 5.80538 18.3717 16 -0.000244141C26.1946 18.3718 32 39.5159 32 62.0159C32 84.5159 26.1946 105.66 16 124.032Z" fill="#6FB4FF"/>
          </svg>
        </div>
        <div class="svg">
          <svg width="516" height="5" viewBox="0 0 516 5" fill="none" xmlns="http://www.w3.org/2000/svg" id="line">
            <path d="M2 2.38037H512" stroke="black" stroke-width="4" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="svg">
          <svg width="516" height="5" viewBox="0 0 516 5" fill="none" xmlns="http://www.w3.org/2000/svg" id="straight">
            <path d="M2 2.38037H512" stroke="#ffc107" stroke-width="4" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="svg">
          <svg width="516" height="5" viewBox="0 0 516 5" fill="none" xmlns="http://www.w3.org/2000/svg" id="refracted">
            <path d="M2 2.38037H512" stroke="#ffc107" stroke-width="4" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="lone" id="object" style="transform: translate(-50%, -100%); top: 50%;">
          <svg width="30" height="45" viewBox="0 0 30 45" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 42.3804C13 43.4849 13.8954 44.3804 15 44.3804C16.1046 44.3804 17 43.4849 17 42.3804L13 42.3804ZM16.4142 0.966156C15.6332 0.185108 14.3668 0.185108 13.5858 0.966156L0.857863 13.6941C0.0768144 14.4751 0.0768144 15.7415 0.857863 16.5225C1.63891 17.3036 2.90524 17.3036 3.68629 16.5225L15 5.2088L26.3137 16.5225C27.0948 17.3036 28.3611 17.3036 29.1421 16.5225C29.9232 15.7415 29.9232 14.4751 29.1421 13.6941L16.4142 0.966156ZM17 42.3804L17 2.38037L13 2.38037L13 42.3804L17 42.3804Z" fill="#2c6fef"/>
          </svg>
        </div>
        <div class="lone" id="image" style="transform: translate(-50%, -100%); top: 50%;">
          <svg width="30" height="45" viewBox="0 0 30 45" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 42.3804C13 43.4849 13.8954 44.3804 15 44.3804C16.1046 44.3804 17 43.4849 17 42.3804L13 42.3804ZM16.4142 0.966156C15.6332 0.185108 14.3668 0.185108 13.5858 0.966156L0.857863 13.6941C0.0768144 14.4751 0.0768144 15.7415 0.857863 16.5225C1.63891 17.3036 2.90524 17.3036 3.68629 16.5225L15 5.2088L26.3137 16.5225C27.0948 17.3036 28.3611 17.3036 29.1421 16.5225C29.9232 15.7415 29.9232 14.4751 29.1421 13.6941L16.4142 0.966156ZM17 42.3804L17 2.38037L13 2.38037L13 42.3804L17 42.3804Z" fill="#2c6fef"/>
          </svg>
        </div>
      </div>
      <div style="width: 50%;">
        <div class="mdc-slider">
          <input class="mdc-slider__input" type="range" min="0" max="64" value="32" name="volume" aria-label="Interactive slider demo">
          <div class="mdc-slider__track">
            <div class="mdc-slider__track--inactive"></div>
            <div class="mdc-slider__track--active">
              <div class="mdc-slider__track--active_fill"></div>
            </div>
          </div>
          <div class="mdc-slider__thumb">
            <div class="mdc-slider__thumb-knob"></div>
          </div>
        </div>
      </div>
    </div>
    <h3 class="hidden offset">Total Interal Reflection</h3>
    <p class="hidden offset">Total internal reflection requires 2 conditions to happen.</p>
    <ul class="hidden offset">
      <li>
        Light must be travelling from a <strong>denser medium</strong>
      </li>
      <li>
        The <strong>angle of incidence</strong> must be greater than the <strong>critical angle</strong>
      </li>
    </ul>
    <p class="hidden offset">Refraction will not happen at the <strong>critical angle</strong> of a denser medium because the ray would refract at 90 degrees and stay within the medium.</p>
    <h3 class="hidden offset">Optical Fibres</h3>
    <p class="hidden offset">A fibre-optic cable can send light signals. These cables use total internal reflection to transmit signals with minimal loss. Fibre-optics is mainly used in 2 fields.</p>
    <ul class="hidden offset">
      <li>Communications</li>
      <li>Medicine</li>
    </ul>
  </section>
</template>
<script>
  function sentence(text) {
    return text[0].toUpperCase() + text.substr(1)
  }

  function camel(text) {
    const words = text.split('-')
    for (let i = 0; i < words.length; i++) {
      if (i) words[i] = sentence(words[i])
    }
    return words.join('')
  }

  function pascal(text) {
    const words = text.split('-')
    for (let i = 0; i < words.length; i++) {
      words[i] = sentence(words[i])
    }
    return words.join('')
  }

  function component(name, element) {
    return mdc[camel(name)][`MDC${pascal(name)}`].attachTo(element)
  }
  
  function setPathWidth(line, width) {
    const path = line.querySelector('path')
    const viewx = width
    line.setAttribute('viewBox', `0 0 ${viewx} 5`)
    line.setAttribute('width', viewx)
    path.setAttribute('d', `M2 2.38037H${viewx - 4}`)
  }

  function getSlopeAngle(y, x) {
    return Math.atan(y / x) * -1
  }

  const demoSlider = document.querySelector('.mdc-slider')
  const line = document.querySelector('#line')
  const straight = document.querySelector('#straight')
  const refracted = document.querySelector('#refracted')
  const [object, image] = [document.querySelector('#object'), document.querySelector('#image')]

  if (demoSlider) {
    const slider = component('slider', demoSlider)
    const { min, max } = demoSlider.querySelector('input').attributes
    const { width } = demoSlider.getBoundingClientRect()
    setPathWidth(line, width * 2)
    setPathWidth(straight, width * 2)
    setPathWidth(refracted, width * 2)
    const ratio = width / (Number.parseInt(max.value) - Number.parseInt(min.value))
    const constant = Number.parseInt(window.getComputedStyle(demoSlider).marginLeft.slice(0, -2)) // mdc-slider margin
    const focus = 16 // focal distance
    const h = object.getBoundingClientRect().height
    straight.style.transform = `rotate(${getSlopeAngle(h, -(max.value - slider.getValue()) * ratio)}rad)`
    refracted.style.transform = `translateX(${focus * ratio}px) rotate(${getSlopeAngle(h, -focus * ratio)}rad)`
    if (object && image) {
      object.style.left = `${slider.getValue() * ratio + constant}px`
      image.style.left = `${slider.getValue() * ratio + constant * 2 + width}px`
      image.style.transform = `translate(-50%, -50%) scale(${focus / (focus - (max.value - slider.getValue()))}) translateY(-50%)`
      slider.listen('MDCSlider:input', e => {
        const { value } = e.detail
        const distance = max.value - value
        const x = - (distance * focus) / (focus - distance)
        object.style.left = `${value * ratio + constant}px`
        image.style.left = `${x * ratio + constant * 2 + width}px`
        image.style.transform = `translate(-50%, -50%) scale(${focus / (focus - distance)}) translateY(-50%)`
        straight.style.transform = `rotate(${getSlopeAngle(h, -distance * ratio)}rad)`
      })
    }
  }
</script>
<script webity>
  const MDCTable = $import('$mdc-table.html')
</script>